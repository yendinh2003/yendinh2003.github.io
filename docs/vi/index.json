[{"uri":"/vi/","title":"Session Management","tags":[],"description":"","content":"Táº£i áº£nh lÃªn Amazon S3 báº±ng Amazon Lambda vÃ  API Gateway Tá»•ng quan Táº£i áº£nh lÃªn Amazon S3 báº±ng AWS Lambda vÃ  API Gateway lÃ  má»™t giáº£i phÃ¡p phá»• biáº¿n trong cÃ¡c á»©ng dá»¥ng web hiá»‡n Ä‘áº¡i nháº±m xá»­ lÃ½ áº£nh khÃ´ng cáº§n mÃ¡y chá»§ (serverless). Trong mÃ´ hÃ¬nh nÃ y: NgÆ°á»i dÃ¹ng gá»­i áº£nh (dáº¡ng Base64 hoáº·c file) qua API Gateway báº±ng phÆ°Æ¡ng thá»©c POST. API Gateway chuyá»ƒn dá»¯ liá»‡u tá»›i AWS Lambda. Lambda xá»­ lÃ½ dá»¯ liá»‡u áº£nh vÃ  upload trá»±c tiáº¿p lÃªn Amazon S3 â€“ má»™t dá»‹ch vá»¥ lÆ°u trá»¯ Ä‘á»‘i tÆ°á»£ng máº¡nh máº½ Ná»™i dung GiÆ¡Ìi thiÃªÌ£u CaÌc bÆ°Æ¡Ìc chuÃ¢Ì‰n biÌ£ Cáº¥u HÃ¬nh Lambda Cáº¥u HÃ¬nh API Gateway Test API trÃªn Postman Dá»n dáº¹p tÃ i nguyÃªn "},{"uri":"/vi/4-apitolambda/4.1-updateiamrole/","title":"Cáº¥u hÃ¬nh API Gateway REST API káº¿t ná»‘i Lambda","tags":[],"description":"","content":"ğŸ¯ Má»¥c tiÃªu: Táº¡o má»™t endpoint dáº¡ng:\nhttps://abc123.execute-api.us-east-1.amazonaws.com/prod/upload â†’ Khi gá»i API POST + gá»­i áº£nh base64 â†’ Lambda cháº¡y â†’ upload lÃªn S3.\nCáº¥u HÃ¬nh NhÆ° á»Ÿ trÃªn bÆ°á»›c 2.3 Táº¡o REST API\nChá»n APIs á»Ÿ thanh chá»©c nÄƒng bÃªn trÃ¡i , sau Ä‘Ã³ chá»n API mÃ  ta Ä‘Ã£ táº¡o Sau Ä‘Ã³ tiáº¿p tá»¥c cáº¥u hÃ¬nh cho API Ä‘Ã³ Táº¡i trang cáº¥u hÃ¬nh cho API chÃºng ta táº¡o , truy cáº­p vÃ o Resources\nTiáº¿n hÃ nh Create resources\nResource name : upload\nCuá»‘i lÃ  Create reosources Sau Ä‘Ã³ sáº½ tráº£ vá» láº¡i giao diá»‡n Resources vÃ  thÃ´ng bÃ¡o táº¡o thÃ nh cÃ´ng\nChá»n /upload â†’ Actions â†’ Create Method â†’ chá»n POST â†’ nháº¥n tick âœ”ï¸ Cáº¥u hÃ¬nh:\nIntegration type: Lambda Function\nUse Lambda Proxy integration: âœ… Báº¬T\nLambda Region: us-east-1\nLambda Function: chá»n uploadImageToS3\nNháº¥n Create Method Deploy API TrÃªn thanh menu Actions â†’ chá»n Deploy API Táº¡o má»™t Stage má»›i: Stage name: prod Nháº¥n Deploy Sau khi deploy xong, báº¡n sáº½ tháº¥y link giá»‘ng nhÆ°:\nhttps://co9tjkrvjc.execute-api.us-east-1.amazonaws.com/prod "},{"uri":"/vi/3-configlambda/3.1-configlambda/","title":"Cáº¥u hÃ¬nh Lambda","tags":[],"description":"","content":" Truy cáº­p vÃ o Lambda vÃ  funtion vá»«a táº¡o Táº¡i giao diá»‡n dá»‹ch vá»¥ Lambda: á» bÃªn trÃ¡i lÃ  danh sÃ¡ch chá»©c nÄƒng cá»§a Lambda, chÃºng ta sáº½ chá»n Function Báº¡n cÃ³ thá»ƒ tháº¥y danh sÃ¡ch function chÃºng ta Ä‘Ã£ táº¡o á»Ÿ trÃªn lÃ  \u0026ldquo;fjc-upload-image\u0026rdquo; Tiáº¿n hÃ nh click vÃ o function Ä‘Ã³ chÃºng ta sáº½ tháº¥y overview vá» function Ä‘Ã³ Cáº¥u hÃ¬nh Lambda Táº¡i Ä‘Ã¢y chÃ­nh lÃ  pháº§n mÃ  báº¡n cÃ³ thá»ƒ thao tÃ¡c cÃ¡c dÃ²ng lá»‡nh code Ä‘á»ƒ láº­p trÃ¬nh báº±ng ngÃ´n ngá»¯ Python nhÆ° Ä‘Ã£ cáº¥u hÃ¬nh á»Ÿ pháº§n trÆ°á»›c Ä‘Ã³: Táº¡i Ä‘Ã¢y báº¡n sáº½ tiáº¿n hÃ nh nháº­p code Ä‘á»ƒ chá»©c nÄƒng phÃ¢n tÃ­ch áº£nh cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng Báº¡n hÃ£y nháº­p code theo cáº¥u trÃºc nhÆ° sau: const AWS = require(\u0026#39;aws-sdk\u0026#39;);\rconst s3 = new AWS.S3();\rconst BUCKET = \u0026#39;fjc-s3bucket\u0026#39;; // \u0026lt;-- Ä‘á»•i tÃªn bucket cá»§a mÃ¬nh\rexports.handler = async (event) =\u0026gt; {\rtry {\rconst body = JSON.parse(event.body);\rconst imageData = body.image; // base64 image\rconst buffer = Buffer.from(imageData, \u0026#39;base64\u0026#39;);\rconst fileName = `upload-${Date.now()}.jpg`;\rawait s3.putObject({\rBucket: BUCKET,\rKey: fileName,\rBody: buffer,\rContentEncoding: \u0026#39;base64\u0026#39;,\rContentType: \u0026#39;image/jpeg\u0026#39;,\r}).promise();\rreturn {\rstatusCode: 200,\rbody: JSON.stringify({ message: \u0026#39;Upload thÃ nh cÃ´ng\u0026#39;, key: fileName }),\r};\r} catch (error) {\rreturn {\rstatusCode: 500,\rbody: JSON.stringify({ error: error.message }),\r};\r}\r}; Sau khi nháº­p vÃ o trong pháº§n Code Source theo cáº¥u trÃºc trÃªn báº¡n cÃ³ thá»ƒ tiáº¿n hÃ nh lÆ°u láº¡i cÃ¡ch thay Ä‘á»•i báº±ng cÃ¡ch: Báº¥m button Deploy hoáº·c tá»• há»£p phÃ­m (Ctrl + Shift + U) Äá»£i má»™t vÃ i giÃ¢y, há»‡ thá»‘ng sáº½ lÆ°u láº¡i táº¥t cáº£ cÃ¡c thay Ä‘á»•i cá»§a báº¡n vÃ  tráº£ vá» thÃ´ng bÃ¡o lÆ°u thÃ nh cÃ´ng Káº¿t quáº£ nhÆ° cÃ¡c hÃ¬nh bÃªn dÆ°á»›i: Báº¡n Ä‘Ã£ hoÃ n thÃ nh bÆ°á»›c cáº¥u hÃ¬nh cho Lambda\n"},{"uri":"/vi/1-introduce/","title":"GiÆ¡Ìi thiÃªÌ£u","tags":[],"description":"","content":"Amazon S3 (Simple Storage Service) lÃ  dá»‹ch vá»¥ lÆ°u trá»¯ Ä‘á»‘i tÆ°á»£ng cá»§a AWS, cho phÃ©p ngÆ°á»i dÃ¹ng lÆ°u trá»¯ vÃ  truy xuáº¥t báº¥t ká»³ loáº¡i dá»¯ liá»‡u nÃ o nhÆ° hÃ¬nh áº£nh, video, tÃ i liá»‡u, hay tá»‡p dá»¯ liá»‡u lá»›n. Dá»¯ liá»‡u trong S3 Ä‘Æ°á»£c lÆ°u trong cÃ¡c \u0026ldquo;bucket\u0026rdquo; vÃ  cÃ³ thá»ƒ truy cáº­p thÃ´ng qua URL hoáº·c API. S3 cung cáº¥p kháº£ nÄƒng lÆ°u trá»¯ gáº§n nhÆ° khÃ´ng giá»›i háº¡n, Ä‘á»™ bá»n cao, vÃ  kháº£ nÄƒng tÃ­ch há»£p máº¡nh máº½ vá»›i cÃ¡c dá»‹ch vá»¥ khÃ¡c trong há»‡ sinh thÃ¡i AWS. ÄÃ¢y lÃ  lá»±a chá»n lÃ½ tÆ°á»Ÿng cho viá»‡c lÆ°u trá»¯ file tÄ©nh, sao lÆ°u dá»¯ liá»‡u, hoáº·c phÃ¢n phá»‘i ná»™i dung qua internet.\nAmazon API Gateway lÃ  dá»‹ch vá»¥ cho phÃ©p táº¡o, cÃ´ng bá»‘, quáº£n lÃ½ vÃ  báº£o máº­t cÃ¡c API á»Ÿ quy mÃ´ lá»›n. NÃ³ Ä‘Ã³ng vai trÃ² lÃ  cá»•ng giao tiáº¿p giá»¯a client (vÃ­ dá»¥: trÃ¬nh duyá»‡t, á»©ng dá»¥ng mobile) vÃ  cÃ¡c dá»‹ch vá»¥ backend nhÆ° AWS Lambda hoáº·c mÃ¡y chá»§ EC2. Vá»›i API Gateway, báº¡n cÃ³ thá»ƒ dá»… dÃ ng xÃ¢y dá»±ng API RESTful hoáº·c HTTP Ä‘á»ƒ tiáº¿p nháº­n vÃ  xá»­ lÃ½ cÃ¡c yÃªu cáº§u tá»« phÃ­a ngÆ°á»i dÃ¹ng. Dá»‹ch vá»¥ nÃ y há»— trá»£ quáº£n lÃ½ version, háº¡n cháº¿ rate, xÃ¡c thá»±c, vÃ  logging, giÃºp quÃ¡ trÃ¬nh triá»ƒn khai API trá»Ÿ nÃªn nhanh chÃ³ng, an toÃ n vÃ  dá»… kiá»ƒm soÃ¡t.\nAWS Lambda lÃ  dá»‹ch vá»¥ Ä‘iá»‡n toÃ¡n khÃ´ng mÃ¡y chá»§ (serverless) cá»§a AWS, cho phÃ©p báº¡n cháº¡y code mÃ  khÃ´ng cáº§n quáº£n lÃ½ mÃ¡y chá»§ váº­t lÃ½ hoáº·c áº£o. Lambda hoáº¡t Ä‘á»™ng dá»±a trÃªn cÆ¡ cháº¿ kÃ­ch hoáº¡t theo sá»± kiá»‡n â€“ nghÄ©a lÃ  khi cÃ³ sá»± kiá»‡n xáº£y ra (vÃ­ dá»¥: má»™t file Ä‘Æ°á»£c upload lÃªn S3 hoáº·c má»™t request tá»« API Gateway), Lambda sáº½ tá»± Ä‘á»™ng cháº¡y Ä‘oáº¡n mÃ£ mÃ  báº¡n Ä‘Ã£ viáº¿t. Báº¡n chá»‰ cáº§n táº­p trung vÃ o logic xá»­ lÃ½, cÃ²n AWS sáº½ lo toÃ n bá»™ viá»‡c triá»ƒn khai, má»Ÿ rá»™ng, vÃ  váº­n hÃ nh. Lambda há»— trá»£ nhiá»u ngÃ´n ngá»¯ nhÆ° Python, Node.js, Java, vÃ  Go, ráº¥t phÃ¹ há»£p cho cÃ¡c á»©ng dá»¥ng nhá», cÃ¡c tÃ¡c vá»¥ tá»± Ä‘á»™ng, vÃ  há»‡ thá»‘ng backend linh hoáº¡t.\n.\nVá»›i viá»‡c sá»­ dá»¥ng S3, báº¡n sáº½ cÃ³ Ä‘Æ°á»£c nhá»¯ng Æ°u Ä‘iá»ƒm sau:\nCÃ³ thá»ƒ lÆ°u hÃ ng triá»‡u hoáº·c hÃ ng tá»· file mÃ  khÃ´ng lo thiáº¿u dung lÆ°á»£ng. Äáº£m báº£o Ä‘á»™ bá»n dá»¯ liá»‡u lÃªn Ä‘áº¿n 99.999999999% (11 sá»‘ 9), ráº¥t an toÃ n cho viá»‡c lÆ°u trá»¯ dÃ i háº¡n. Má»—i tá»‡p Ä‘á»u cÃ³ URL riÃªng, cÃ³ thá»ƒ truy cáº­p trá»±c tiáº¿p qua web hoáº·c thÃ´ng qua API. Cho phÃ©p kiá»ƒm soÃ¡t quyá»n truy cáº­p tá»«ng file, tá»«ng bucket báº±ng policy, IAM, ACL. LÃ m viá»‡c tá»‘t vá»›i Lambda, CloudFront, API Gateway, Athena, v.v. Amazon S3 lÃ  má»™t giáº£i phÃ¡p lÆ°u trá»¯ Ä‘Ã¡m mÃ¢y máº¡nh máº½, linh hoáº¡t vÃ  Ä‘Ã¡ng tin cáº­y, phÃ¹ há»£p cho cáº£ cÃ¡ nhÃ¢n láº«n doanh nghiá»‡p á»Ÿ má»i quy mÃ´. Vá»›i kháº£ nÄƒng lÆ°u trá»¯ khÃ´ng giá»›i háº¡n, Ä‘á»™ bá»n dá»¯ liá»‡u cá»±c cao, vÃ  tÃ­ch há»£p sÃ¢u vá»›i há»‡ sinh thÃ¡i AWS, S3 lÃ  lá»±a chá»n hÃ ng Ä‘áº§u cho viá»‡c lÆ°u trá»¯ hÃ¬nh áº£nh, video, tÃ i liá»‡u, backup, vÃ  ná»™i dung tÄ©nh cho website hoáº·c á»©ng dá»¥ng. Nhá» vÃ o cÆ¡ cháº¿ phÃ¢n quyá»n vÃ  truy cáº­p linh hoáº¡t, Amazon S3 khÃ´ng chá»‰ giÃºp lÆ°u trá»¯ an toÃ n mÃ  cÃ²n há»— trá»£ triá»ƒn khai cÃ¡c há»‡ thá»‘ng hiá»‡n Ä‘áº¡i nhÆ° serverless má»™t cÃ¡ch dá»… dÃ ng vÃ  hiá»‡u quáº£.\n"},{"uri":"/vi/2-prerequiste/2.1-creates3bucket/","title":"Táº¡o S3 Bucket Ä‘á»ƒ lÆ°u trá»¯ ","tags":[],"description":"","content":"Khá»Ÿi táº¡o S3 Bucket dÃ¹ng Ä‘á»ƒ lÆ°u trá»¯ hÃ¬nh áº£nh vÃ  káº¿t quáº£ Truy cáº­p vÃ o Console vÃ  tÃ¬m dá»‹ch vá»¥ Amazon S3\nTruy cáº­p vÃ o trang AWS Management Console Tiáº¿n hÃ nh Ä‘Äƒng nháº­p tÃ i khoáº£n cá»§a báº¡n Sau khi Ä‘Äƒng nháº­p thÃ nh cÃ´ng thÃ¬ sáº½ chuyá»ƒn ngÆ°á»i dÃ¹ng Ä‘áº¿n trang chÃ­nh cá»§a AWS Manage Console nhÆ° hÃ¬nh dÆ°á»›i : TÃ¬m kiáº¿m S3 trÃªn thanh Search vÃ  chá»n dá»‹ch vá»¥ S3 Chá»n Create bucket vÃ  lÃ m theo hÆ°á»›ng dáº«n Cáº¥u hÃ¬nh cho S3\nTáº¡i pháº§n General configuration:\nAWS Region: tÃ¹y theo Region cá»§a báº¡n muá»‘n sá»­ dá»¥ng Bucket type: chá»n General purpose Bucket name: nháº­p fjc-s3bucket Táº¡i pháº§n Object Ownership:\nChá»n ACLs disable (recommended) Táº¡i pháº§n Block Public Access setting for this bucket:\nBá» chá»n Block all public access TÃ­ch chá»n I acknowledge that the current settings might result in this bucket and the objects within becoming public. Giá»¯ nguyÃªn cáº¥u hÃ¬nh máº·c Ä‘á»‹nh á»Ÿ pháº§n dÆ°á»›i rá»“i sau Ä‘Ã³ chá»n Create Bucket\nÄá»£i vÃ i giÃ¢y sau Ä‘Ã³ báº¡n sáº½ Ä‘Æ°á»£c chuyá»ƒn Ä‘áº¿n trang danh sÃ¡ch vÃ  hiá»ƒn thá»‹ thÃ´ng bÃ¡o táº¡o thÃ nh cÃ´ng nhÆ° hÃ¬nh dÆ°á»›i: "},{"uri":"/vi/2-prerequiste/","title":"CaÌc bÆ°Æ¡Ìc chuÃ¢Ì‰n biÌ£","tags":[],"description":"","content":"Äá»ƒ tÃ¬m hiá»ƒu cÃ¡ch táº¡o S3 Bucket, Lambda vÃ  API GateWay cÃ¡c báº¡n cÃ³ thá»ƒ tham kháº£o bÃ i lab :\nGiá»›i thiá»‡u vá» Amazon S3 LÃ m viá»‡c vá»›i AWS Lambda LÃ m viá»‡c vá»›i API Gateway Äá»ƒ sá»­ dá»¥ng S3 Bucket Ä‘á»ƒ quáº£n lÃ½ dá»¯ liá»‡u nÃ³i chung vÃ  áº£nh nÃ³i riÃªng.Trong pháº§n nÃ y chÃºng ta sáº½ cÃ¹ng tÃ¬m hiá»ƒu cÃ¡ch Ä‘á»ƒ upload áº£nh lÃªn S3 báº±ng AWS Lambda vÃ  API Gateway\nNÃ´Ì£i dung Táº¡o S3 Bucket Táº¡o Lambda Function Táº¡o REST API trong API Gateway "},{"uri":"/vi/3-configlambda/3.2-grandpermissions3/","title":"Cáº¥p quyá»n S3 cho Lambda","tags":[],"description":"","content":"Cáº¥p quyá»n S3 cho Lambda Function (trong IAM Console) CÃ¡ch 1: Cáº¥p quyá»n toÃ n quyá»n S3 (dá»…, nhanh) Trong giao diá»‡n IAM , táº¡i thanh chá»©c nÄƒng bÃªn trÃ¡i chá»n Role\nBáº¡n sáº½ tháº¥y Role cÃ³ tÃªn giá»‘ng function mÃ¬nh vá»«a táº¡o\nTiáº¿n hÃ nh click vÃ o Role\nKáº¿t quáº£ nhÆ° hÃ¬nh sau : Sau khi vÃ o Ä‘Æ°á»£c giao diá»‡n cá»§a Role Ä‘Ã³:\ná» pháº§n Permissions policies:\nTa tiáº¿n hÃ nh chá»n tÃ¡c vá»¥ Add permission sau Ä‘Ã³ chá»n Attach Policies ChÃºng ta sáº½ tháº¥y toÃ n bá»™ danh sÃ¡ch cÃ¡c Permissions Policies\nTrÃªn thanh Seacrch, tiáº¿n hÃ nh tÃ¬m kiáº¿m AmazonS3FullAccess Chá»n policies Ä‘Ã³ vÃ  tiáº¿n hÃ nh Add permission ğŸ“Œ Káº¿t quáº£: Lambda giá» cÃ³ toÃ n quyá»n vá»›i táº¥t cáº£ bucket S3 CÃ¡ch 2 : Cáº¥p quyá»n chá»‰ upload áº£nh vÃ o Ä‘Ãºng 1 bucket (an toÃ n hÆ¡n) Quay láº¡i vá»›i Role cá»§a function vá»«a táº¡o Ä‘Ã³\ná» pháº§n Permissions policies:\nTa tiáº¿n hÃ nh chá»n tÃ¡c vá»¥ Add permission sau Ä‘Ã³ chá»n Create inline policy Sau khi vÃ o giao diá»‡n Create policy\nTáº¡i pháº§n Specify permission , chÃºng ta cÃ³ thá»ƒ Ä‘Æ°a code vÃ o Ä‘á»ƒ cáº¥u hÃ¬nh\nSau Ä‘Ã³ nháº¥n Next\n{\r\u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;,\r\u0026#34;Statement\u0026#34;: [\r{\r\u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;,\r\u0026#34;Action\u0026#34;: [\r\u0026#34;s3:PutObject\u0026#34;\r],\r\u0026#34;Resource\u0026#34;: \u0026#34;arn:aws:s3:::fjc-s3bucket/\u0026#34;\r}\r]\r} Tiáº¿p theo Ä‘áº¿n giao diá»‡n Review and create Policy name : LambdaS3UploadOnly Sau Ä‘Ã³ chá»n Create policy Sau khi táº¡o xong sáº½ Ä‘Æ°á»£c Ä‘Æ°a vá» Role vÃ  hiá»ƒn thá»‹ thÃ´ng bÃ¡o thÃ nh cÃ´ng ğŸ“Œ Sau khi hoÃ n táº¥t, Lambda cá»§a báº¡n Ä‘Ã£ cÃ³ thá»ƒ upload áº£nh lÃªn S3 bucket thÃ nh cÃ´ng.\n"},{"uri":"/vi/2-prerequiste/2.2-createlambdafunction/","title":"Táº¡o Lambda Function","tags":[],"description":"","content":" TrÃªn thanh tÃ¬m kiáº¿m, hÃ£y nháº­p Lambda sau Ä‘Ã³ chá»n dá»‹ch vá»¥ Lambda Sau khi truy cáº­p vÃ o dá»‹ch vá»¥ thá»±c hiá»‡n Create Lambda Function Trong giao diá»‡n Create function\nFunction name : fjc-upload-image Runtime : chá»n Node.js 18x Nhá»¯ng pháº§n cÃ²n láº¡i giá»¯ nguyÃªn theo cáº¥u hÃ¬nh máº·c Ä‘á»‹nh Sau Ä‘Ã³ nháº¥n Create Function Sau khi táº¡o thÃ nh cÃ´ng sáº½ Ä‘Æ°á»£c chuyá»ƒn vá» function vá»«a táº¡o vÃ  hiá»ƒn thá»‹ thÃ´ng bÃ¡o táº¡o thÃ nh cÃ´ng "},{"uri":"/vi/3-configlambda/","title":"Cáº¥u hÃ¬nh Lambda","tags":[],"description":"","content":"Trong bÆ°á»›c nÃ y, chuÌng ta seÌƒ tiáº¿n hÃ nh cáº¥u hÃ¬nh cho Lambda vÃ  cáº¥p quyá»n sá»­ dá»¥ng S3 cho Lambda\nÄá»ƒ giÃºp cho Lambda hoáº¡t Ä‘á»™ng trÆ¡n tru vÃ  linh hoáº¡t\nNÃ´Ì£i dung 3.1. Cáº¥u hÃ¬nh Lambda 3.2. Cáº¥p quyá»n S3 cho Lambda\n"},{"uri":"/vi/2-prerequiste/2.3-createrestapi/","title":"Táº¡o Rest API trong API Gateway","tags":[],"description":"","content":"Cáº¥u hÃ¬nh API Gateway cho chá»©c nÄƒng phÃ¢n tÃ­ch áº£nh TÃ¬m kiáº¿m vÃ  truy cáº­p dá»‹ch vá»¥ cá»§a API Gateway\nTáº¡i thÃ nh tÃ¬m kiáº¿m , hÃ£y nháº­p API Gateway vÃ  truy cáº­p vÃ o dá»‹ch vá»¥ Ä‘Ã³ Sau khi truy cáº­p Ä‘Æ°á»£c dá»‹ch vá»¥ thá»±c hiá»‡n tÃ¡c vá»¥ Create an API Cáº¥u hÃ¬nh API Gateway\nTáº¡i trang API type, báº¡n cÃ³ thá»ƒ tháº¥y cÃ³ nhiá»u loáº¡i API sá»­ dá»¥ng cho tá»«ng má»¥c Ä‘Ã­ch khÃ¡c nhau nhÆ° : HTTP API, REST API , WebSocket API,\u0026hellip;\u0026hellip;. Trong pháº§n nÃ y , chÃºng ta sáº½ cÃ¹ng sá»­ dá»¥ng REST API Trong pháº§n choose a API type\nBáº¡n hÃ£y chá»n REST API Báº¥m vÃ o button Build Káº¿t quáº£ nhÆ° sau: Khi vÃ o Ä‘Æ°á»£c giao diá»‡n Create REST API API details : chá»n New API API name : ImageUploadAPI API endpoint type : Regional Sau Ä‘Ã³ áº¥n chá»n buuton Create API Sau Ä‘Ã³ sáº½ Ä‘Æ°á»£c Ä‘iá»u hÆ°á»›ng vá» API vá»«a táº¡o vÃ  gá»­i thÃ´ng bÃ¡o táº¡o thÃ nh cÃ´ng "},{"uri":"/vi/4-apitolambda/","title":"Cáº¥u hÃ¬nh API Gateway","tags":[],"description":"","content":"Cáº¥u hÃ¬nh API Gateway lÃ  bÆ°á»›c quan trá»ng Ä‘á»ƒ quáº£n lÃ½ vÃ  báº£o vá»‡ luá»“ng truy cáº­p Ä‘áº¿n cÃ¡c dá»‹ch vá»¥ backend nhÆ° AWS Lambda, EC2, hoáº·c cÃ¡c há»‡ thá»‘ng khÃ¡c. Viá»‡c cáº¥u hÃ¬nh giÃºp chÃºng ta:\nKiá»ƒm soÃ¡t truy cáº­p: chá»‰ cho phÃ©p ngÆ°á»i dÃ¹ng hoáº·c á»©ng dá»¥ng há»£p lá»‡ gá»i API.\nChuyá»ƒn Ä‘á»•i Ä‘á»‹nh dáº¡ng dá»¯ liá»‡u: tá»« HTTP request thÃ nh input phÃ¹ há»£p cho Lambda hoáº·c dá»‹ch vá»¥ backend.\nBáº£o máº­t: há»— trá»£ xÃ¡c thá»±c (API key, JWT, IAM), giá»›i háº¡n tá»‘c Ä‘á»™ gá»i (throttling), chá»‘ng DDoS.\nQuáº£n lÃ½ phiÃªn báº£n vÃ  monitoring: dá»… dÃ ng theo dÃµi, phÃ¢n tÃ­ch log vÃ  triá»ƒn khai nhiá»u phiÃªn báº£n API.\nTÃ³m láº¡i, cáº¥u hÃ¬nh API Gateway giÃºp Ä‘áº£m báº£o API hoáº¡t Ä‘á»™ng an toÃ n, hiá»‡u quáº£ vÃ  dá»… quáº£n lÃ½ trong mÃ´i trÆ°á»ng sáº£n xuáº¥t.\nNá»™i Dung 4.1 Cáº¥u hÃ¬nh API Gateway REST API káº¿t ná»‘i Lambda\n"},{"uri":"/vi/5-testapi/","title":"Test API trÃªn PostMan","tags":[],"description":"","content":"TEST API UPLOAD áº¢NH Base64 TRÃŠN POSTMAN Trong Ä‘á» tÃ i nÃ y chÃºng ta sáº½ sá»­ dá»¥ng Base64,cÃ´ng dá»¥ng cá»§a Base64 trong Ä‘á» tÃ i upload áº£nh lÃªn S3 báº±ng Lambda vÃ  API Gateway lÃ  giÃºp truyá»n dá»¯ liá»‡u áº£nh qua máº¡ng (HTTP) má»™t cÃ¡ch an toÃ n vÃ  dá»… xá»­ lÃ½ trong mÃ´i trÆ°á»ng text-only nhÆ° JSON hoáº·c Lambda\nBase64 lÃ  gÃ¬? Base64 lÃ  má»™t cÃ¡ch mÃ£ hÃ³a nhá»‹ phÃ¢n thÃ nh vÄƒn báº£n (chuá»—i kÃ½ tá»±), giÃºp gá»­i cÃ¡c file (áº£nh, Ã¢m thanh, v.v.) qua cÃ¡c há»‡ thá»‘ng chá»‰ há»— trá»£ vÄƒn báº£n nhÆ°:\nJSON HTML HTTP request body Æ¯u Ä‘iá»ƒm khi dÃ¹ng Base64\nDá»… nhÃºng vÃ o JSON (\u0026ldquo;body\u0026rdquo;: \u0026ldquo;{ imageBase64: \u0026lsquo;\u0026hellip;\u0026rsquo;}\u0026rdquo;) KhÃ´ng cáº§n cáº¥u hÃ¬nh phá»©c táº¡p nhÆ° multipart/form-data CÃ³ thá»ƒ test dá»… dÃ ng trong Lambda console Trong Ä‘á» tÃ i nÃ y, Base64 giÃºp mÃ£ hÃ³a áº£nh thÃ nh chuá»—i vÄƒn báº£n Ä‘á»ƒ gá»­i qua API Gateway má»™t cÃ¡ch dá»… dÃ ng, vÃ  Lambda cÃ³ thá»ƒ giáº£i mÃ£ láº¡i Ä‘á»ƒ upload lÃªn S3. ÄÃ¢y lÃ  giáº£i phÃ¡p Ä‘Æ¡n giáº£n, hiá»‡u quáº£ Ä‘á»ƒ truyá»n áº£nh trong mÃ´i trÆ°á»ng khÃ´ng há»— trá»£ file trá»±c tiáº¿p nhÆ° Lambda Console hay API Gateway.\nTest API trÃªn PostMan NhÆ° á»Ÿ trÃªn ta Ä‘Ã£ gá»i Ä‘Æ°á»£c URL lÃ : https://co9tjkrvjc.execute-api.us-east-1.amazonaws.com/prod/uploads Tiáº¿p theo cÃ¹ng tiáº¿n hÃ nh trÃªn PostMan Method : POST URL : API vá»«a táº¡o Header : \u0026quot;\u0026quot; Content-Type: application/json \u0026quot;\u0026quot; Body : {\u0026#34;image\u0026#34;: \u0026#34;/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxISEh...\u0026#34;} ÄÆ°á»ng link image lÃ  mÃ¬nh convert sang base64 Sau Ä‘Ã³ nháº¥n Send vÃ  káº¿t quáº£ sáº½ Ä‘Æ°á»£c hiá»ƒn thá»‹ bÃªn dÆ°á»›i : Kiá»ƒm tra káº¿t quáº£ trÃªn S3 Sau khi Post man thÃ´ng bÃ¡o upload thÃ nh cÃ´ng thÃ¬ chÃºng ta qua S3 kiá»ƒm tra káº¿t quáº£ áº£nh Ä‘Ã£ lÃªn chÆ°a NhÆ° trong hÃ¬nh áº£nh lÃ  Ä‘Ã£ thÃ nh cÃ´ng Náº¿u muá»‘n xem áº£nh chi tiáº¿t, hÃ£y chá»n áº£nh báº¡n muá»‘n xem , khi giao diá»‡n má»Ÿ ra chá»n Open Khi Ä‘Ã³ sáº½ Ä‘Æ°á»£c chuyá»ƒn sang trang má»›i vÃ  áº£nh Ä‘Ã£ Ä‘Æ°á»£c hiá»ƒn thá»‹ Váº­y lÃ  báº¡n Ä‘Ã£ thá»±c hiá»‡n upload áº£nh lÃªn S3 thÃ nh cÃ´ng\n"},{"uri":"/vi/6-cleanup/","title":"Dá»n dáº¹p tÃ i nguyÃªn  ","tags":[],"description":"","content":"ChÃºng ta sáº½ tiáº¿n hÃ nh cÃ¡c bÆ°á»›c sau Ä‘á»ƒ xÃ³a cÃ¡c tÃ i nguyÃªn chÃºng ta Ä‘Ã£ táº¡o trong bÃ i thá»±c hÃ nh nÃ y.\nXÃ³a S3 bucket Truy cáº­p giao diá»‡n quáº£n trá»‹ S3. ChÃºng ta sáº½ tháº¥y giao diá»‡n S3 Bucket vÃ  tÃªn cá»§a bucket vá»«a táº¡o 2. Truy cáº­p giao diá»‡n quáº£n trá»‹ dá»‹ch vá»¥ S3\nClick chá»n S3 bucket chÃºng ta Ä‘Ã£ táº¡o cho bÃ i thá»±c hÃ nh. ( VÃ­ dá»¥ : fjc-s3bucket ) Click Empty. Äiá»n permanently delete, sau Ä‘Ã³ click Empty Ä‘á»ƒ tiáº¿n hÃ nh xÃ³a object trong bucket. Click Exit. Sau khi xÃ³a háº¿t object trong bucket, click Delete Äiá»n tÃªn S3 bucket, sau Ä‘Ã³ click Delete bucket Ä‘á»ƒ tiáº¿n hÃ nh xÃ³a S3 bucket. XÃ³a Lambda Function Truy cáº­p vÃ o giao diá»‡n quáº£n trá»‹ dá»‹ch vá»¥ Labmda\nClick Function. Chá»n function chÃºng ta táº¡o á»Ÿ trÃªn, VÃ­ dá»¥ : fjc-upload-image Click Action. Chá»n Delete Sau Ä‘Ã³ nháº­p confirm XÃ³a Rest API Truy cáº­p vÃ o giao diá»‡n quáº£n trá»‹ dá»‹ch vá»¥ API Gateway\nClick vÃ o Api á»Ÿ thanh bÃªn Sau Ä‘Ã³ click vÃ o APIs chÃºng ta Ä‘Ã£ táº¡o á»Ÿ trÃªn Click Delete vÃ  nháº­p \u0026ldquo;confirm\u0026rdquo; Váº­y lÃ  chÃºng ta Ä‘Ã£ hoÃ n thÃ nh viá»‡c dá»n dáº¹p tÃ i nguyÃªn\n"},{"uri":"/vi/categories/","title":"Categories","tags":[],"description":"","content":""},{"uri":"/vi/tags/","title":"Tags","tags":[],"description":"","content":""}]